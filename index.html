<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple To-Do List</title>
<link rel="stylesheet" href="style.css"> 

</head>
<body>
    <h1>TaskTracker</h1>
    <input class="task-button" type="text" id="newItem" placeholder="Add a new task">

    <ul id="todoList"></ul>
    <div class="timer-container">
        <label for="timeInput">Set Timer (seconds):</label>
        <input type="number" id="timeInput" min="0" placeholder="Enter seconds">
        <button onclick="startTimer()">Start Timer</button>
        <div id="timerDisplay">00:00</div>
    </div>
    <!-- Dropdown menu for buttons -->
    <div class="dropdown">
        <button onclick="toggleDropdown()">Actions</button>
        <div id="dropdown-content" class="dropdown-content">
            <button onclick="performAction(addItem)">Add Item</button>
            <button onclick="performAction(clearAll)">Clear All</button>
            <button onclick="performAction(markAllCompleted)">Mark All as Completed</button>
            <button onclick="performAction(() => filterTasks('all'))">All</button>
            <button onclick="performAction(() => filterTasks('completed'))">Completed</button>
            <button onclick="performAction(() => filterTasks('incomplete'))">Incomplete</button>
            <button onclick="performAction(saveList)">Save List</button>
            <button onclick="performAction(shareList)">Share List</button>
        </div>
    </div>

    <div class="container">
        <ul id="todoList"></ul>
        <textarea id="detailsBox" placeholder="Enter details here..."></textarea>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            loadItems();

            // Close the dropdown if the user clicks outside of it
            window.onclick = function(event) {
                if (!event.target.matches('.dropdown button')) {
                    closeDropdown();
                }
            }
        });

        let timerInterval;

        function startTimer() {
            const inputSeconds = parseInt(document.getElementById('timeInput').value);
            if (isNaN(inputSeconds) || inputSeconds <= 0) {
                alert("Please enter a valid number of seconds.");
                return;
            }

            let timeRemaining = inputSeconds;
            updateTimerDisplay(timeRemaining);

            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay(timeRemaining);

                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    alert("Time's up!");
                }
            }, 1000);
        }

        function updateTimerDisplay(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            document.getElementById('timerDisplay').textContent =
                `${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
        }

        function toggleDropdown() {
            document.getElementById("dropdown-content").classList.toggle("show");
        }

        function closeDropdown() {
            document.getElementById("dropdown-content").classList.remove("show");
        }

        function performAction(action) {
            action();
            closeDropdown();
        }

        function addItem() {
            const newItem = document.getElementById('newItem').value;
            if (newItem.trim() !== '') {
                const todoList = document.getElementById('todoList');
                const li = document.createElement('li');

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.onchange = function() {
                    this.parentElement.classList.toggle('completed');
                    saveItems();
                };

                const label = document.createElement('label');
                label.textContent = newItem;
                label.ondblclick = function() {
                    editItem(this);
                };

                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.onclick = function() {
                    this.parentElement.remove();
                    saveItems();
                };

                li.appendChild(checkbox);
                li.appendChild(label);
                li.appendChild(deleteButton);
                todoList.appendChild(li);

                document.getElementById('newItem').value = ''; // Clear input field
                saveItems();
            }
        }

        function editItem(label) {
            const newText = prompt("Edit your task:", label.textContent);
            if (newText !== null && newText.trim() !== '') {
                label.textContent = newText;
                saveItems();
            }
        }

        function saveItems() {
            const todos = [];
            document.querySelectorAll('#todoList li').forEach(item => {
                const text = item.querySelector('label').textContent;
                const completed = item.querySelector('input[type="checkbox"]').checked;
                todos.push({ text, completed });
            });
            localStorage.setItem('todoItems', JSON.stringify(todos));
        }

        function loadItems() {
            const todos = JSON.parse(localStorage.getItem('todoItems'));
            if (todos && todos.length > 0) {
                const todoList = document.getElementById('todoList');
                todos.forEach(item => {
                    if (item && item.text !== undefined) {
                        const li = document.createElement('li');

                        const checkbox = document.createElement('input');
                        checkbox.type = 'checkbox';
                        checkbox.checked = item.completed;
                        checkbox.onchange = function() {
                            this.parentElement.classList.toggle('completed');
                            saveItems();
                        };

                        const label = document.createElement('label');
                        label.textContent = item.text;
                        label.ondblclick = function() {
                            editItem(this);
                        };

                        const deleteButton = document.createElement('button');
                        deleteButton.textContent = 'Delete';
                        deleteButton.onclick = function() {
                            this.parentElement.remove();
                            saveItems();
                        };

                        if (item.completed) {
                            li.classList.add('completed');
                        }

                        li.appendChild(checkbox);
                        li.appendChild(label);
                        li.appendChild(deleteButton);
                        todoList.appendChild(li);
                    }
                });
            }
        }

        function clearAll() {
            localStorage.removeItem('todoItems');
            const todoList = document.getElementById('todoList');
            todoList.innerHTML = '';
        }

        function markAllCompleted() {
            document.querySelectorAll('#todoList li').forEach(item => {
                const checkbox = item.querySelector('input[type="checkbox"]');
                checkbox.checked = true;
                item.classList.add('completed');
            });
            saveItems();
        }

        function filterTasks(filter) {
            const items = document.querySelectorAll('#todoList li');
            items.forEach(item => {
                switch (filter) {
                    case 'completed':
                        item.style.display = item.querySelector('input[type="checkbox"]').checked ? 'flex' : 'none';
                        break;
                    case 'incomplete':
                        item.style.display = !item.querySelector('input[type="checkbox"]').checked ? 'flex' : 'none';
                        break;
                    default:
                        item.style.display = 'flex';
                        break;
                }
            });
        }

        function saveList() {
            const todos = JSON.parse(localStorage.getItem('todoItems')) || [];
            const blob = new Blob([JSON.stringify(todos, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'todo-list.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function shareList() {
            const todos = JSON.parse(localStorage.getItem('todoItems')) || [];
            const shareData = {
                title: 'My To-Do List',
                text: todos.map(item => `${item.completed ? '☑️' : '🔘'} ${item.text}`).join('\n')
            };

            if (navigator.share) {
                navigator.share(shareData).then(() => {
                    console.log('List shared successfully');
                }).catch((error) => {
                    console.error('Error sharing list:', error);
                });
            } else {
                alert('Web Share API is not supported in your browser.');
            }
        }
    </script>
</body>
</html>





